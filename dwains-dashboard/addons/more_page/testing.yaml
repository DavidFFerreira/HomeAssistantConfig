- type: custom:dwains-flexbox-card
  items_classes: "col-xs-12 col-sm-6 col-sm-6 col-xl-6"
  cards:
    - type: custom:apexcharts-card
      graph_span: 7d12h
      header:
        show: true
        title: "BOM Weather Forecast - Tamworth Airport"
      span:
        start: day
        offset: -6h
      apex_config:
        chart: { type: "area", height: 300 }
        stroke: { show: true, lineCap: "square", dashArray: [10, 0, 0] }
        dataLabels: { enabled: true }
        legend: { show: false }
        fill:
          {
            type: "gradient",
            gradient:
              {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.45,
                opacityTo: 0.05,
                stops: [20, 100, 100, 100],
              },
          }
        xaxis:
          {
            type: "datetime",
            labels: { datetimeFormatter: { month: "ddd", day: "ddd" } },
          }
        yaxis:
          - seriesName: "Rainfall"
            title:
              text: "Rainfall (mm)"
            min: 0
            opposite: true
          - seriesName: "High"
            title:
              text: "Temperature (°C)"
          - seriesName: "High"
            show: false

      series:
        - entity: weather.east_tamworth
          name: Rainfall
          type: area
          color: "#1192e8"
          extend_to_end: false
          stroke_width: 2
          unit: "mm"
          data_generator: |
            return entity.attributes.forecast.map((entry) => {
              return [new Date(entry.datetime), entry.precipitation];
            });
        - entity: weather.east_tamworth
          name: High
          type: area
          color: "da1e28"
          extend_to_end: false
          stroke_width: 3
          unit: "°C"
          show:
            datalabels: true
          data_generator: |
            return entity.attributes.forecast.map((entry) => {
              return [new Date(entry.datetime), entry.temperature];
            });
        - entity: weather.east_tamworth
          name: Low
          type: area
          color: "#0043ce"
          extend_to_end: false
          stroke_width: 3
          unit: "°C"
          show:
            datalabels: true
          data_generator: |
            return entity.attributes.forecast.map((entry) => {
              return [new Date(entry.datetime), entry.templow];
            });
    - type: "custom:config-template-card"
      entities:
        - sensor.sunrise
        - sensor.sunset
        - sensor.weather_outside_uvindex
        - sensor.weather_outside_radiation
      card:
        type: "custom:apexcharts-card"
        header:
          show: true
          show_states: true
          colorize_states: true
          title: UV Index and Radiation
        span:
          start: day
        graph_span: 24h
        all_series_config:
          stroke_width: 2
          type: area
          extend_to_end: false
          float_precision: 0
        color_list:
          - yellow
          - yellow
          - green
          - grey
        series:
          - entity: sensor.weather_outside_uvindex
            name: UV Index
            group_by:
              func: last
              duration: 10min
          - entity: sensor.weather_outside_uvindex
            name: UV Index
            offset: "-24h"
            type: line
            opacity: 0.2
            group_by:
              func: last
              duration: 10min
            show:
              in_header: false
          - entity: sensor.weather_outside_radiation
            name: Radiation
            group_by:
              func: last
              duration: 10min
        y_axis_precision: 0
        apex_config:
          annotations:
            xaxis:
              - x: "${new Date(states['sensor.sunrise'].state).getTime()}"
                label:
                  text: ☼
                  borderWidth: 0
                  style:
                    background: "#0000"
              - x: "${new Date(states['sensor.sunset'].state).getTime()}"
                label:
                  text: ☾
                  borderWidth: 0
                  style:
                    background: "#0000"
          yaxis:
            - seriesName: UV Index
              decimalsInFloat: 0
            - seriesName: UV Index
              show: false
            - seriesName: Radiation
              decimalsInFloat: 0
              opposite: true
            - seriesName: Night time
              opposite: true
              show: false
          tooltip:
            x:
              format: "ddd dd MMM - HH:mm"
          xaxis:
            tooltip:
              enabled: false
          legend:
            show: false
          grid:
            borderColor: "#7B7B7B"
          chart:
            foreColor: "#7B7B7B"
            zoom:
              type: x
              enabled: true
              autoScaleYaxis: true
            toolbar:
              show: true
              autoSelected: zoom
              tools:
                zoom: true
                zoomin: false
                zoomout: false
                pan: false
                reset: true
    - type: custom:apexcharts-card
      graph_span: 48h1s
      header:
        show: true
        title: "Dark Sky Forecast - Tamworth Airport"
      span:
        start: hour
        offset: -1s
      apex_config:
        chart: { type: "area", height: 300 }
        stroke: { show: true, lineCap: "square", dashArray: [0, 10] }
        legend: { show: false }
        fill:
          {
            type: "gradient",
            gradient:
              {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.45,
                opacityTo: 0.05,
                stops: [20, 100, 100, 100],
              },
          }
        xaxis:
          {
            type: "datetime",
            labels: { datetimeFormatter: { month: "ddd", day: "ddd" } },
          }
        yaxis:
          - seriesName: "Temp"
            title:
              text: "Temperature (°C)"
          - seriesName: "Rainfall"
            title:
              text: "Rainfall (mm)"
            min: 0
            opposite: true

      series:
        - entity: weather.dark_sky
          name: Temperature
          type: area
          color: "#121619"
          extend_to_end: false
          stroke_width: 3
          unit: "°C"
          data_generator: |
            return entity.attributes.forecast.map((entry) => {
              return [new Date(entry.datetime), entry.temperature];
            });
          group_by:
            func: last
            duration: 1h
        - entity: weather.dark_sky
          name: Rainfall
          type: area
          color: "#1192e8"
          extend_to_end: false
          stroke_width: 2
          unit: "mm"
          curve: stepline
          data_generator: |
            return entity.attributes.forecast.map((entry) => {
              return [new Date(entry.datetime), entry.precipitation || 0];
            });
          group_by:
            func: last
            duration: 1h

    - type: custom:apexcharts-card
      graph_span: 7d
      span:
        end: day
      header:
        show: true
        title: "Outdoor Temperature (Week)"
        show_states: false
        colorize_states: true
      apex_config:
        chart:
          {
            type: "area",
            height: 350,
            toolbar: { show: true, tools: { reset: true } },
            zoom: { type: "x", enabled: true, autoScaleYaxis: true },
          }
        stroke: { show: true, lineCap: "square", dashArray: [0, 5, 2] }
        legend: { show: false }
        fill:
          {
            type: ["solid", "solid"],
            gradient:
              {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.45,
                opacityTo: 0.05,
                stops: [20, 100, 100, 100],
              },
          }
        xaxis:
          {
            type: "datetime",
            labels: { datetimeFormatter: { month: "ddd", day: "ddd" } },
          }
        yaxis:
          - seriesName: "Temp"
            decimalsInFloat: 0
            title:
              text: "Temperature (°C)"
          - seriesName: "Temp"
            show: false
          - seriesName: "Humidity"
            opposite: true
            decimalsInFloat: 0
            title:
              text: "Humidity (%)"
          - seriesName: "Temp"
            show: false
      series:
        - entity: sensor.weather_outside_temperature
          type: line
          name: Temp
          extend_to_end: false
          stroke_width: 4
          curve: smooth
          unit: "°C"
          group_by:
            func: last
            duration: 1h
        - entity: sensor.weather_outside_temperature
          type: line
          extend_to_end: false
          stroke_width: 2
          color: "#424242"
          name: Change
          curve: smooth
          unit: "°C"
          group_by:
            func: delta
            duration: 6h
        - entity: sensor.weather_outside_humidity
          type: line
          extend_to_end: false
          stroke_width: 1.5
          curve: smooth
          unit: "%"
          group_by:
            func: last
            duration: 1h

    - type: custom:apexcharts-card
      graph_span: 59h
      header:
        show: true
        title: "Amber Price Prediction (Solar Feed-In)"
      span:
        start: hour
        offset: -1d
      apex_config:
        chart: { type: "area", height: 300 }
        stroke: { show: true, width: 3, curve: smooth }
        legend: { show: false }
        dataLabels: { enabled: false }
        xaxis:
          {
            type: "datetime",
            labels: { datetimeFormatter: { month: "ddd", day: "ddd" } },
          }
        fill:
          {
            type: "gradient",
            gradient:
              {
                shadeIntensity: 1,
                inverseColors: true,
                opacityFrom: 0.45,
                opacityTo: 0.05,
                stops: [20, 100, 100, 100],
              },
          }
      series:
        - entity: sensor.amber_solar_feed_in_tariff
          name: Predicted Price
          type: area
          # color: "#008FFB"
          extend_to_end: false
          data_generator: |
            return entity.attributes.price_forcecast.map((entry) => {
              return [new Date(entry.pricing_period), entry.price];
            });
        - entity: sensor.amber_solar_feed_in_tariff
          name: Historic Price
          type: area
          extend_to_end: false

- type: custom:dwains-flexbox-card
  items_classes: "col-xs-12 col-sm-4 col-sm-4 col-xl-4"
  cards:
    - type: custom:apexcharts-card
      graph_span: 7d1s
      header:
        show: true
        title: "COVID-19 - UK - 1st Vaccinations"
      span:
        end: day
      apex_config:
        chart: { type: "area", height: 200 }
        stroke: { show: true, curve: smooth, dashArray: 0 }
        legend: { show: false }
        dataLabels: { enabled: false }
        xaxis:
          {
            type: "datetime",
            labels: { datetimeFormatter: { month: "ddd", day: "ddd" } },
          }
        yaxis:
          - seriesName: "vax"
            decimalsInFloat: 0
            title:
              text: "No. Vaccinations"
            logarithmic: false
        fill:
          {
            type: "gradient",
            gradient:
              {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.45,
                opacityTo: 0.05,
                stops: [20, 100, 100, 100],
              },
          }
      series:
        - entity: sensor.covid_19_uk_vaccinations
          attribute: PeopleVaccinatedFirstDoseByPublishDate
          name: First Dose
          type: area
          # color: "#008FFB"
          extend_to_end: false
          stroke_width: 3
          group_by:
            func: max
            duration: 1d
    - type: custom:apexcharts-card
      graph_span: 7d1s
      header:
        show: true
        title: "COVID-19 - UK - 2nd Vaccinations"
      span:
        end: hour
      apex_config:
        chart: { type: "area", height: 200 }
        stroke: { show: true, curve: smooth, dashArray: 0 }
        legend: { show: false }
        dataLabels: { enabled: false }
        xaxis:
          {
            type: "datetime",
            labels: { datetimeFormatter: { month: "ddd", day: "ddd" } },
          }
        yaxis:
          - seriesName: "vax"
            decimalsInFloat: 0
            title:
              text: "No. Vaccinations"
            logarithmic: false
        fill:
          {
            type: "gradient",
            gradient:
              {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.45,
                opacityTo: 0.05,
                stops: [20, 100, 100, 100],
              },
          }
      series:
        - entity: sensor.covid_19_uk_vaccinations
          attribute: PeopleVaccinatedSecondDoseByPublishDate
          name: Second Dose
          type: area
          # color: "#008FFB"
          extend_to_end: false
          stroke_width: 3
          group_by:
            func: max
            duration: 1d
- type: custom:dwains-flexbox-card
  items_classes: "col-xs-12 col-sm-6 col-sm-6 col-xl-6"
  cards:
    - type: custom:apexcharts-card
      graph_span: 7d1s
      header:
        show: true
        title: "COVID-19 - Vaccinations"
      span:
        end: hour
      apex_config:
        chart: { type: "area", height: 400 }
        stroke: { show: true, curve: smooth, dashArray: 0 }
        legend: { show: true }
        dataLabels: { enabled: false }
        xaxis:
          {
            type: "datetime",
            labels: { datetimeFormatter: { month: "ddd", day: "ddd" } },
          }
        yaxis:
          - seriesName: "vax"
            decimalsInFloat: 0
            title:
              text: "No. Vaccinations"
            logarithmic: false
        fill:
          {
            type: "gradient",
            gradient:
              {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.45,
                opacityTo: 0.05,
                stops: [20, 100, 100, 100],
              },
          }
      stacked: true
      series:
        - entity: sensor.covid_19_covidlive_act
          attribute: Doses
          name: ACT
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_nsw
          attribute: Doses
          name: NSW
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_nt
          attribute: Doses
          name: NT
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_qld
          attribute: Doses
          name: QLD
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_sa
          attribute: Doses
          name: SA
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_tas
          attribute: Doses
          name: TAS
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_vic
          attribute: Doses
          name: VIC
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_wa
          attribute: Doses
          name: WA
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_aus_vaccines
          name: UNK
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d

    - type: custom:apexcharts-card
      graph_span: 7d1s
      header:
        show: true
        title: "COVID-19 - Vaccinations (as % of Population)"
      span:
        end: hour
      apex_config:
        chart: { type: "area", height: 400 }
        stroke: { show: true, curve: smooth, dashArray: 0 }
        legend: { show: true }
        dataLabels: { enabled: false }
        xaxis:
          {
            type: "datetime",
            labels: { datetimeFormatter: { month: "ddd", day: "ddd" } },
          }
        yaxis:
          - seriesName: "vax"
            decimalsInFloat: 2
            title:
              text: "No. Vaccinations"
            logarithmic: false
        fill:
          {
            type: "gradient",
            gradient:
              {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.45,
                opacityTo: 0.05,
                stops: [20, 100, 100, 100],
              },
          }
      series:
        - entity: sensor.covid_19_covidlive_act
          attribute: Doses
          transform: "return (x / 431100) * 100;"
          float_precision: 3
          unit: "%"
          name: ACT
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_nsw
          attribute: Doses
          transform: "return (x / 8164100) * 100;"
          float_precision: 3
          unit: "%"
          name: NSW
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_nt
          attribute: Doses
          transform: "return (x / 246000) * 100;"
          float_precision: 3
          unit: "%"
          name: NT
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_qld
          attribute: Doses
          transform: "return (x / 5174400) * 100;"
          float_precision: 3
          unit: "%"
          name: QLD
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_sa
          attribute: Doses
          transform: "return (x / 1769300) * 100;"
          float_precision: 3
          unit: "%"
          name: SA
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_tas
          attribute: Doses
          transform: "return (x / 540600) * 100;"
          float_precision: 3
          unit: "%"
          name: TAS
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_vic
          attribute: Doses
          transform: "return (x / 6694900) * 100;"
          float_precision: 3
          unit: "%"
          name: VIC
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_wa
          attribute: Doses
          transform: "return (x / 2661900) * 100;"
          float_precision: 3
          unit: "%"
          name: WA
          type: area
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_aus
          attribute: Doses
          transform: "return (x / 25687000) * 100;"
          float_precision: 3
          unit: "%"
          name: AUS
          type: area
          color: black
          stroke_width: 3
          group_by:
            func: last
            duration: 1d

- type: custom:dwains-flexbox-card
  items_classes: "col-xs-12 col-sm-6 col-sm-6 col-xl-6"
  cards:
    - type: custom:apexcharts-card
      graph_span: 7d1s
      header:
        show: true
        title: "COVID-19 - Vaccinations"
      span:
        end: hour
      apex_config:
        chart: { type: "area", height: 400 }
        stroke: { show: true, curve: smooth, dashArray: 0 }
        legend: { show: true }
        dataLabels: { enabled: false }
        xaxis:
          {
            type: "datetime",
            labels: { datetimeFormatter: { month: "ddd", day: "ddd" } },
          }
        yaxis:
          - seriesName: "vax"
            decimalsInFloat: 0
            title:
              text: "No. Vaccinations"
            logarithmic: false
        fill:
          {
            type: "gradient",
            gradient:
              {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.45,
                opacityTo: 0.05,
                stops: [20, 100, 100, 100],
              },
          }
      series:
        - entity: sensor.covid_19_covidlive_act
          attribute: Doses
          name: ACT
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_nsw
          attribute: Doses
          name: NSW
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_nt
          attribute: Doses
          name: NT
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_qld
          attribute: Doses
          name: QLD
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_sa
          attribute: Doses
          name: SA
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_tas
          attribute: Doses
          name: TAS
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_vic
          attribute: Doses
          name: VIC
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_wa
          attribute: Doses
          name: WA
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d

    - type: custom:apexcharts-card
      graph_span: 7d1s
      header:
        show: true
        title: "COVID-19 - Tests"
      span:
        end: hour
      apex_config:
        chart: { type: "area", height: 400 }
        stroke: { show: true, curve: smooth, dashArray: 0 }
        legend: { show: true }
        dataLabels: { enabled: false }
        xaxis:
          {
            type: "datetime",
            labels: { datetimeFormatter: { month: "ddd", day: "ddd" } },
          }
        yaxis:
          - seriesName: "vax"
            decimalsInFloat: 0
            title:
              text: "No. Tests"
            logarithmic: false
        fill:
          {
            type: "gradient",
            gradient:
              {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.45,
                opacityTo: 0.05,
                stops: [20, 100, 100, 100],
              },
          }
      stacked: true
      series:
        - entity: sensor.covid_19_covidlive_act
          attribute: Tests
          unit: "Tests"
          name: ACT
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_nsw
          attribute: Tests
          unit: "Tests"
          name: NSW
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_nt
          attribute: Tests
          unit: "Tests"
          name: NT
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_qld
          attribute: Tests
          unit: "Tests"
          name: QLD
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_sa
          attribute: Tests
          unit: "Tests"
          name: SA
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_tas
          attribute: Tests
          unit: "Tests"
          name: TAS
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_vic
          attribute: Tests
          unit: "Tests"
          name: VIC
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_wa
          attribute: Tests
          unit: "Tests"
          name: WA
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
    - type: custom:apexcharts-card
      header:
        show: true
        title: "COVID-19 - Tests (as % of Population)"
      graph_span: 7d
      span:
        end: hour
      apex_config:
        chart: { type: "area", height: 400 }
        stroke: { show: true, curve: smooth, dashArray: 0 }
        legend: { show: true }
        dataLabels: { enabled: false }
        xaxis:
          {
            type: "datetime",
            labels: { datetimeFormatter: { month: "ddd", day: "ddd" } },
          }
        yaxis:
          - seriesName: "vax"
            decimalsInFloat: 3
            title:
              text: "No. Tests"
            logarithmic: false
        fill:
          {
            type: "gradient",
            gradient:
              {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.45,
                opacityTo: 0.05,
                stops: [20, 100, 100, 100],
              },
          }
      series:
        - entity: sensor.covid_19_covidlive_act
          attribute: Tests
          transform: "return (x / 431100) * 100;"
          float_precision: 3
          unit: "%"
          name: ACT
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_nsw
          attribute: Tests
          transform: "return (x / 8164100) * 100;"
          float_precision: 3
          unit: "%"
          name: NSW
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_nt
          attribute: Tests
          transform: "return (x / 246000) * 100;"
          float_precision: 3
          unit: "%"
          name: NT
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_qld
          attribute: Tests
          transform: "return (x / 5174400) * 100;"
          float_precision: 3
          unit: "%"
          name: QLD
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_sa
          attribute: Tests
          transform: "return (x / 1769300) * 100;"
          float_precision: 3
          unit: "%"
          name: SA
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_tas
          attribute: Tests
          transform: "return (x / 540600) * 100;"
          float_precision: 3
          unit: "%"
          name: TAS
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_vic
          attribute: Tests
          transform: "return (x / 6694900) * 100;"
          float_precision: 3
          unit: "%"
          name: VIC
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_wa
          attribute: Tests
          transform: "return (x / 2661900) * 100;"
          float_precision: 3
          unit: "%"
          name: WA
          type: area
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
        - entity: sensor.covid_19_covidlive_aus
          attribute: Tests
          transform: "return (x / 25687000) * 100;"
          float_precision: 3
          unit: "%"
          name: AUS
          type: area
          color: black
          extend_to_end: true
          stroke_width: 3
          group_by:
            func: last
            duration: 1d
    - type: custom:apexcharts-card
      header:
        show: true
        title: "COVID-19 - Tests"
      graph_span: 7d
      span:
        end: hour
      apex_config:
        chart: { type: "area", height: 400 }
        stroke: { show: true, curve: smooth, dashArray: 0 }
        legend: { show: true }
        dataLabels: { enabled: false }
        xaxis:
          {
            type: "datetime",
            labels: { datetimeFormatter: { month: "ddd", day: "ddd" } },
          }
        yaxis:
          - seriesName: "vax"
            decimalsInFloat: 0
            title:
              text: "No. Tests"
            logarithmic: false
        fill:
          {
            type: "gradient",
            gradient:
              {
                shadeIntensity: 1,
                inverseColors: false,
                opacityFrom: 0.45,
                opacityTo: 0.05,
                stops: [20, 100, 100, 100],
              },
          }
      series:
        - entity: sensor.covid_19_covidlive_act
          attribute: Tests
          unit: "Tests"
          name: ACT
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_nsw
          attribute: Tests
          unit: "Tests"
          name: NSW
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_nt
          attribute: Tests
          unit: "Tests"
          name: NT
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_qld
          attribute: Tests
          unit: "Tests"
          name: QLD
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_sa
          attribute: Tests
          unit: "Tests"
          name: SA
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_tas
          attribute: Tests
          unit: "Tests"
          name: TAS
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_vic
          attribute: Tests
          unit: "Tests"
          name: VIC
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
        - entity: sensor.covid_19_covidlive_wa
          attribute: Tests
          unit: "Tests"
          name: WA
          type: area
          stroke_width: 3
          group_by:
            func: delta
            duration: 1d
