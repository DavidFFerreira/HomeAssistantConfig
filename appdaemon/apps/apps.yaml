---
influxdb2_to_entity:
  module: influxdb2_to_entity
  class: InfluxDB2_to_entity
  bucket: homeassistant
  org: d6e534a3bf390236
  token: JYFMd_qLPbtOvM7cjYOAqdyjDXqxngd1sVwAiBtIvQy--G7FCGVXMC4txLcGe5kQlOjcxkdWzEhcXZMo7IkRxw==
  host: 192.168.1.91
  port: 8086
  entity_settings:
    entities:
      archive_test:
        range_start: "-1d"
        group_function:
        options:
          - 'location = timezone.location(name: "Australia/Sydney")'
        imports:
          - timezone
        daily_fetch_time: "00:00:01"
        attributes:
          friendly_name: "Archive Test"
          unit_of_measurement: "kWh"
        query: >
          filter(fn: (r) => r._measurement == "Â°C" and r.entity_id == "tempest_st_00056115_temperature" and  r._field == "value")  
          |> aggregateWindow(every: 5m, fn: last, createEmpty: false)
          |> yield(name: "last")
          |> keep(columns: ["_time","_value"])
